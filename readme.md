<h1>Телеграмм-бот для выбора тотемного животного</h1>

<h3>Техническое задание</h3>

В рамках хакатона было получено задание разработать телеграмм-бот, который через прохождение пользователем теста из 
нескольких вопросов определял подходящее пользователю тотемное животное, популяризировал программу опеки и «Клуб Друзей»
московского зоопарка. 
Задача:
1. Проанализировать, как лучше собрать бота, который через мультипл чойс в вопросах поможет пользователю подобрать его тотемное животное в Московском зоопарке.
Вопросы могут быть с долей юмора (для примера приложим Адвент который мы делали к новому году).
2. Составить вопросы и варианты ответов, а также предположить итог, что за животное будет получаться по итогу той или иной сборки ответов
3. Предложить «выход» из теста, который будет получать пользователь, например, классную картинку что «Твое тотемное животное в Московском зоопарке – дикобраз», например, или «Да ты дикобраз!», как это будет?  Картинка, стикер, мини-видео?
4. Далее пользователь должен получить мини интро про программу опеки, опять же, предлагаю вместе подумать, как это будет? Мол, а Дикобраза в зоопарке можно взять под опеку, хочешь узнать больше, жми сюда. Или, может, сразу выводить мини текст вместе с результатом. Готовы рассмотреть варианты.

<h3>Краткое описание</h3>

При выборе средств разработки бота мы остановились на ре шении AIOGram – это библиотека Python для создания ботов в Telegram. Она построена на базе библиотеки асинхронного программирования asyncio, что делает ее хорошо подходящей для обработки большого количества трафика и быстрого взаимодействия с пользователями. Поскольку AIOGram построен на базе asyncio, он обеспечивает поддержку асинхронности, что позволяет ботам обрабатывать несколько запросов одновременно, повышая общую производительность бота. 
Также для обеспечения работы нескольких пользователей была реализован паттерн программирования – конечный автомат. Все результаты пользователей сохранялись в базе данных, что исключало ошибки и перезаписи переменных.


<h3>Запуск бота</h3>

Примеры команд даны для Windows-системы.

1. Перейдите в терминале в директорию проекта. 
2. Клонируйте проект.

```bash
git clone https://github.com/IJustADeveloper/MoscowZOOTeleBot.git
```
3. Создайте и активируйте виртуальную среду.

```bash
py -m vevn venv
venv\scripts\activate
```

4. Установите требуемые библиотеки.

```bash
pip install -r requirements.txt
```

5. Получите секретный ключ в Телеграм-боте BotFather  и вставьте его в файл creds.env
6. В файл creds.env в соответствующие переменные вставьте email-адресс, с которого будут отправлятся информационные сообщения и пароль. 
Сейчас бот поддерживает отправку сообщений с адресов Gmail. Для получения пароля Выберите значок своего профиля > Управление аккаунтом Google> Безопасность> Пароли от приложений, выберите приложение и устройство, затем выберите "Создать".
7. Запустите исполняемый файл бота.

```bash
py bot.py run
```
Также вы можете запустиь исполняемый файл средствами вашего IDE.


<h3>Внесение изменений в базу данных</h3>

Внимание! Изменение вопросов, добавление животных, редактура логики работы предназначени для опытных пользователей!

Для изменения вопроса нужно исправить тескт вопроса в файле database/data.py. Все вопросы содержаться в списке question.
Каждый вопрос является списком, где первый элемент - текст вопроса, второй элемент - словарь ответов. Каждый ответ - словарь, где по ключу name идет Текст ответа, по ключу value изменение категории при выборе этого ответа, по ключу category - категория, которую изменяет ответ.
Дополнительно к каждому вопросу в папке images/question/ лежат коллажи, которые дополняют вопрос. Наименование медиа файла должно быть в виде q1.jpg, где 1 - номер вопроса в списке.
Добавление вопросов может изменить логику работы программы! Будьте внимательны при внесении изменений!
После редактирования файла data.py нужно запустить исполняемый файл data_uploading.py для внесения изменений. Все данные в базе перезапишутся.

Для добавления животных - в файл database/data.py в словарь animals необходимо добавить новый элемент по образцу и заполнить параметры животного. Дополнительно, в словарь animals_description нужно добавить финальное сообщение про тотем этого животного, а в словарь animals_link - ссылку на информационную страницу животного с сайта зоопарка. Все ключи всех словарей должны быть одинаковы. В директорию images/animals нужно выложить картинку связанную с этим животным. Название файла дожно быть аналогично ключу словаря. Расширение - jpg.
После редактирования файла data.py нужно запустить исполняемый файл data_uploading.py для внесения изменений. Все данные в базе перезапишутся.